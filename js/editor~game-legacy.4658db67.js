(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor~game"],{1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),o=n("825a"),a=n("1d80"),u=n("4840"),c=n("8aa5"),s=n("50c4"),l=n("14c3"),f=n("9263"),h=n("d039"),d=[].push,p=Math.min,v=4294967295,g=!h((function(){return!RegExp(v,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);var u,c,s,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,g=new RegExp(t.source,h+"g");while(u=f.call(g,r)){if(c=g.lastIndex,c>p&&(l.push(r.slice(p,u.index)),u.length>1&&u.index<r.length&&d.apply(l,u.slice(1)),s=u[0].length,p=c,l.length>=o))break;g.lastIndex===u.index&&g.lastIndex++}return p===r.length?!s&&g.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var f=o(t),h=String(this),d=u(f,RegExp),y=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),w=new d(g?f:"^(?:"+f.source+")",m),b=void 0===i?v:i>>>0;if(0===b)return[];if(0===h.length)return null===l(w,h)?[h]:[];var x=0,k=0,j=[];while(k<h.length){w.lastIndex=g?k:0;var L,E=l(w,g?h:h.slice(k));if(null===E||(L=p(s(w.lastIndex+(g?0:k)),h.length))===x)k=c(h,k,y);else{if(j.push(h.slice(x,k)),j.length===b)return j;for(var _=1;_<=E.length-1;_++)if(j.push(E[_]),j.length===b)return j;k=x=L}}return j.push(h.slice(x)),j}]}),!g)},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,o,a){try{var u=t[o](a),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,c,"next",t)}function c(t){r(a,i,o,u,c,"throw",t)}u(void 0)}))}}},6562:function(t,e,n){"use strict";n("a15b9"),n("d81d"),n("ac1f"),n("1276");e["a"]={stringify:function(t){return t.layer.data.map((function(t){return t.map((function(t){return t.index}))})).map((function(t){return t.join(" ")})).join("|")},parse:function(t){return t.split("|").map((function(t){return t.split(" ").map((function(t){return+t}))}))}}},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),i=n("23cb"),o=n("50c4");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,u=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,s=void 0===c?n:i(c,n);while(s>u)e[u++]=t;return e}},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new A(r||[]);return o._invoke=L(t,n,a),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=c;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function v(){}function g(){}function y(){}var m={};m[o]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(O([])));b&&b!==n&&r.call(b,o)&&(m=b);var x=y.prototype=v.prototype=Object.create(m);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function j(t,e){function n(i,o,a,u){var c=s(t[i],t,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var i;function o(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}this._invoke=o}function L(t,e,n){var r=l;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return I()}n.method=i,n.arg=o;while(1){var a=n.delegate;if(a){var u=E(a,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=s(t,e,n);if("normal"===c.type){if(r=n.done?d:f,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=s(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function O(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[u]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(j.prototype),j.prototype[a]=function(){return this},t.AsyncIterator=j,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new j(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(x),x[u]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},a15b9:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),o=n("fc6a"),a=n("a640"),u=[].join,c=i!=Object,s=a("join",",");r({target:"Array",proto:!0,forced:c||!s},{join:function(t){return u.call(o(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("23cb"),o=n("a691"),a=n("50c4"),u=n("7b0b"),c=n("65f0"),s=n("8418"),l=n("1dde"),f=n("ae40"),h=l("splice"),d=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,v=Math.min,g=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!h||!d},{splice:function(t,e){var n,r,l,f,h,d,m=u(this),w=a(m.length),b=i(t,w),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=w-b):(n=x-2,r=v(p(o(e),0),w-b)),w+n-r>g)throw TypeError(y);for(l=c(m,r),f=0;f<r;f++)h=b+f,h in m&&s(l,f,m[h]);if(l.length=r,n<r){for(f=b;f<w-r;f++)h=f+r,d=f+n,h in m?m[d]=m[h]:delete m[d];for(f=w;f>w-r+n;f--)delete m[f-1]}else if(n>r)for(f=w-r;f>b;f--)h=f+r-1,d=f+n-1,h in m?m[d]=m[h]:delete m[d];for(f=0;f<n;f++)m[f+b]=arguments[f+2];return m.length=w-r+n,l}})},b98a:function(t,e,n){"use strict";var r=n("6e92"),i=n("f8cc");function o(){Object.assign(window.$triggers,{start:function(){return 0},setPause:function(){return 0},destroy:function(){return 0},getMapData:function(){return 0},setAudioSettings:function(){return 0},setLayer:function(){return 0},setBlockPropsEdit:function(){return 0}})}function a(){Object.assign(window.$events,{onEngineLoad:function(){return 0}})}Object.assign(window,{$shared:{},$libs:{},$comps:{},$info:{},$data:{aud:{},blocks:[],isDebug:!1,editObjectType:0,sBlockId:0,sBlockIdAlt:-1,sStructId:0,sStructIdAlt:-1,sLayerKey:"m"},$triggers:{},$events:{}}),o(),a(),window.$triggers.clear=o;var u="SB_as",c=0;function s(t){var e=t||r["a"].load(u,{},i["a"].from.json);null==e&&(e={vol:.1}),window.$data.aud=e,window.$triggers.setAudioSettings(e),r["a"].save(u,e,i["a"].to.json),console.log("Вызов №"+c+++"\nЗначение: "),console.dir(e)}s(),e["a"]={setAudStgs:s,clearTriggersAndEvents:function(){o(),a()},setData:function(t){Object.assign(window.$data,t)}}},bee2:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},c0f2:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));n("4de4"),n("4160"),n("d81d"),n("ac1f"),n("5319"),n("1276"),n("159b");var r=n("d4ec"),i=n("bee2"),o=n("f8cc"),a=(n("99af"),n("cb29"),n("a434"),n("6562")),u=-1;function c(t,e){return new Array(e).fill([]).map((function(){return new Array(t).fill(u)}))}function s(t,e,n){var r=t.map((function(t){return t.length>=e?t.splice(0,e):t.concat(new Array(e-t.length).fill(u))}));return r.length>=n?r.length=n:r=r.concat(c(e,n-t.length)),r}function l(t,e,n){var r=t?a["a"].parse(t):c(e,n);return s(r,e,n)}var f="n";function h(t){return"string"===typeof t?o["a"].from.json(t):t}var d=navigator.language||navigator.userLanguage,p=new Intl.DateTimeFormat(d,{weekday:"long",year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r["a"])(this,t),this.project=e,this.maps=this.project.m||[],this.images=this.project.i||{},this.anims=this.project.n||[],this.audio=this.project.a||{},this.datas=this.project.d||{},this.rules=this.project.r||[],this.manifest=this.project.mn||{},this.cellSize=this.manifest.cs||16}return Object(i["a"])(t,[{key:"v",value:function(){return this.manifest.v_s}},{key:"projName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.project;return h(e).mn.n||t}},{key:"projDescr",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.project;return h(e).mn.d||t}},{key:"projPreview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.project;return h(t).mn.pv||h(t).mn.pv_a||"img/preview.png"}},{key:"isHasAutoPreview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.project;return null!=h(t).mn.pv_a}},{key:"projTimeUpd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.project,e=o["a"].from.time.minutes(t.mn.t_u);return p.format(e).replace(/^./,(function(t){return t.toUpperCase()}))}},{key:"animData",value:function(t){var e=this.anims[t],n=this.imgByCAI(e._c,e.i);return{fWidth:e.w,fHeight:e.h,sprite:n,fStart:e.fs,fEnd:e.fe,fRate:e.s,yoyo:e.yy}}},{key:"animCfg",value:function(t,e,n,r){var i=this.anims.filter((function(t){return t._c===e}))[n];return{key:""+n,frames:i.fs!==i.fe?t.anims.generateFrameNumbers(r,{start:i.fs,end:i.fe}):[{key:r,frame:i.fs}],frameRate:i.s,yoyo:i.yy,repeat:i.r||-1}}},{key:"audAll",value:function(){return{e:this.audio.e.map((function(t,e){return{id:e,name:t.n,info:t.i,data:t.d}})),m:this.audio.m.map((function(t,e){return{id:e,name:t.n,info:t.i,data:t.d}}))}}},{key:"imgByCAI",value:function(t,e){try{return this.images[t][e].d}catch(n){return""}}},{key:"imgNameByCAI",value:function(t,e){try{return this.images[t][e][f]}catch(n){return""}}},{key:"mapSize",value:function(t){var e="number"===typeof t?this.maps[t].m:t.m;return{width:e.w,height:e.h}}},{key:"mapColor",value:function(t){var e=("number"===typeof t?this.maps[t].m:t.m)||"000000";return+("0x"+e.c)}},{key:"mapData",value:function(t){var e=this.maps[t],n=this.mapSize(e),r=e.l;return{data:{blocksProps:e.d.p},layers:{s:o["a"].from.json(r.s||{}),m:l(r.m,n.width,n.height)}}}},{key:"mapGravity",value:function(t){var e=this.maps[t];return e.m.p_g}},{key:"d_blocks",value:function(){return this.datas.b||[]}},{key:"sumBlockDataList",value:function(){var t=this,e=o["a"].copy(this.d_blocks());return e.forEach((function(e){e.i=t.imgByCAI("b",e.i)})),e}},{key:"collisblBlocksIds",value:function(){var t=[];return this.d_blocks().forEach((function(e,n){e.is_p&&t.push(n)})),t}},{key:"blocksTextures",value:function(){return this.sumBlockDataList().map((function(t){return t.i||t.c}))}},{key:"d_structs",value:function(){return this.datas.s||[]}},{key:"sumStructDataList",value:function(){var t=this,e=o["a"].copy(this.d_structs());return e.map((function(e){return{name:e.n,texture:t.imgByCAI("s",e.i),width:e.w*t.cellSize,height:e.h*t.cellSize,color:e.c,isPhysical:e.is_p}}))}},{key:"structsTextures",value:function(){return this.sumStructDataList().map((function(t){return t.texture||t.color}))}},{key:"structsSizeList",value:function(){var t=this;return this.d_structs().map((function(e){return[e.w*t.cellSize,e.h*t.cellSize]}))}},{key:"d_entities",value:function(){return this.datas.e||[]}},{key:"getEntityData",value:function(t){var e=this.d_entities()[t],n=(e.al||"").split(" ").filter((function(t){return t.length})).map((function(t){return+t}));return""===n[0]&&(n=null),{tid:t,name:e.n,rules:e.rls,categ:"e",descr:e.d,width:e.w*this.cellSize,height:e.h*this.cellSize,anims:n,sprite:"number"===typeof e.i?this.imgByCAI("e",e.i):"",color:+("0x"+e.c)||21760,velX:e.vx,velY:e.vy,maxVelX:e.mx,maxVelY:e.my,acelX:e.ax,acelY:e.ay,dragX:e.dx,dragY:e.dy}}}]),t}()},cb29:function(t,e,n){var r=n("23e7"),i=n("81d5"),o=n("44d2");r({target:"Array",proto:!0},{fill:i}),o("fill")},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))}}]);
//# sourceMappingURL=editor~game-legacy.4658db67.js.map